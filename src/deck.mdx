# Secure Development

---

# OWASP Top 10

---

<Flex>

![OWASP&&width='100px'](./images/owasp.svg)

<div style={{marginLeft: '40px'}}>

# OWASP

</div>

</Flex>

## The Open Web Application Security Project

> The Open Web Application Security Project® (OWASP) is a nonprofit foundation that works to improve the security of software. Through community-led open-source software projects, hundreds of local chapters worldwide, tens of thousands of members, and leading educational and training conferences, the OWASP Foundation is the source for developers and technologists to secure the web.

---

# Top 10 Web Application Security Risks

<Step>

- Injection
- Broken Authentication
- Sensitive Data Exposure
- XML External Entities (XXE)
- Broken Access Control
- Security Misconfiguration
- Cross-Site Scripting XSS
- Insecure Deserialization
- Using Components with Known Vulnerabilities
- Insufficient Logging & Monitoring

</Step>

<Note>

- Injection:
  - Sending untrusted data to an interpreter - SQL Injection
- Sensitive:
  - Includes unencrypted or weakly encrypted data
- Access Control:
  - Restrictions not properly enforced.
- Misconfiguration:
  - Most commonly seen issue
  - Default configs, open cloud storage
- XSS:
  - Execute scripts in the user's browser.
- Deserialization:
  - Leads to remote code execution
- Logging:
  - Lets attackers stay around

</Note>

---

# Cross-site scripting

---

## Cross-site scripting

- Code is injected into a trusted site.
- User's browser executes the code as if it came from the site.
- Malicious code has access to any browser data for that site.

<Step>

### Potentially compromised data

<Step>

- Cookies
- Session tokens
- Local storage

</Step>

</Step>

---

## 3 Types of XSS

<Step>

* Reflected XSS
* Stored XSS
* DOM XSS

</Step>

---

## XSS Prevention

<Step>

* Input Sanitization
* Output Escaping
  * React escapes output by default!


</Step>

---

# Cross-site Requst Forgery

<Step>

Causes a user to execute a web request they didn't intend to.

Often initiated by a fraudulent link or email.

</Step>

<Note>

Works because browsers send along session cookies with each request.

</Note>

---

## CSRF Prevention

<Step>

  * Framework built-in protection
  * CSRF Tokens
  * User interaction protection
  * Samesite cookie attribute
  * Origin/Referer header checking
  * Custom request headers

</Step>

<Note>

Custom request headers works great for AJAX requests

</Note>

---

# CSRF Demo

Imagine this is a really sweet demo of an XSS flaw on one website being used to transfer money at a second site.

---

# Broken authentication

<Step>

* Brute force / weak passwords
* Weak forgot-password processes
* Weak password encryption
* Session ID mishandling
  * Exposed in URL
  * Not properly invalidated

</Step>

---

## Authentication Attack Prevention

<Step>

* Multi-factor authentication
* No default credentials
* Encourage strong passwords / check for weak passwords
* Limit or delay failed login attempts

</Step>

---

## Session fixation / hijacking

Impersonating a user by gaining access to a session identifier.

---

## Session best practices

<Step>

* Use an established, vetted session framework
  * Unpredictable session ids
  * Rotate identifiers
* Limit session lifetime
* Invalidate existing session upon login   
* Use `httpOnly` cookies

</Step>

---

# Broken access control
## Client-side application security doesn’t exist!

<Step>

Assume the user can do anything at any time on your client application.

</Step>

---
# Sensitive data exposure
## Client-side application security (still) doesn’t exist!

<Step>

### Don't send anything Sensitive

</Step>

<Step offset={1}>

* Encryption or other secret keys
* User credentials
* Password-of-the-day

</Step>

---

### Imagine (if you will), another captivating and interactive demo.  

In this one I'll have a site with an admin area that can be revealed with javascript, and also I want to have something behind a password check that's done on the client side.

---

## Protecting data in a client-side application.

<Step>

* Don't send secrets
* Transport Level Security
  * Google and HTTPS
  * Let's Encrypt
* Don't store more data than necessary
* Encrypt data at rest

</Step>

---

# Components with known vulnerabilities

<Step>

## Examples

</Step>

<Step offset={1}>

* SolarWinds
* Codecov

</Step>

<Step offset={3}>

## Mitigation

</Step>

<Step offset={4}>

* Take security patches
* `npm audit`
* Github Dependabot

</Step>

---

# Content Security Policy and CORS

Determines which origins (other than its own) an application will allow loading resources from.

---

# Links

- https://owasp.org/www-project-top-ten/
